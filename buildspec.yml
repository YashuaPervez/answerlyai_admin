version: 0.2

phases:
  install:
    runtime-versions:
      nodejs: 22
    commands:
      - echo "Installing dependencies..."
      - node -v
      - npm install -g serverless@^3.38.0
      - npm install --production
  pre_build:
    commands:
      - aws --version
      - aws s3 cp $S3_ENV_URI ./.env
  build:
    commands:
      - sls deploy
